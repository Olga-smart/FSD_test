(self.webpackChunk=self.webpackChunk||[]).push([[125],{68:(e,t,n)=>{"use strict";n(490),n(414),n(109);var l=n(638);let o,r,i=document.querySelector(".js-card-booking"),u=i.querySelector(".js-card-booking__arrival"),c=i.querySelector(".js-card-booking__departure"),s=i.querySelector(".js-card-booking__days"),a=i.querySelector(".js-card-booking__days-word"),d=+s.textContent,p=+k(i.querySelector(".js-card-booking__price").textContent),f=i.querySelector(".js-card-booking__price-for-x-days"),_=+k(i.querySelector(".js-card-booking__service-fee").textContent),y=+k(i.querySelector(".js-card-booking__discount").textContent),m=+k(i.querySelector(".js-card-booking__additional-service-fee").textContent),S=i.querySelector(".js-card-booking__total");function v(){d=Math.floor((r-o)/864e5),s.textContent=d,function(e){[1,21,31,41,51,61,71,81,91].includes(e)?a.textContent=" сутки":a.textContent=" суток"}(d),f.textContent=g(p*d)+"₽",S.textContent=0==d?"0₽":g(p*d+_-y+m)+"₽"}function g(e){return e.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")}function k(e){return e.replace(/\D+/g,"")}l(u).datepicker({onSelect:function(e,t,n){l(u).val(e.split(" - ")[0]),l(c).val(e.split(" - ")[1]),o=t[0],r=t[1],v()}}),l(c).datepicker({onSelect:function(e,t,n){l(u).val(e.split(" - ")[0]),l(c).val(e.split(" - ")[1]),o=t[0],r=t[1],v()}});let b=i.querySelectorAll(".js-card-booking__info-icon");for(let e of b){let t;e.addEventListener("mouseover",(function(e){let n=e.target;t=document.createElement("div"),t.className="card-booking__tooltip",t.innerHTML=n.dataset.tooltip,document.body.append(t);let l=n.getBoundingClientRect();t.style.left=l.left-t.offsetWidth-5+"px",t.style.top=l.top+"px"})),e.addEventListener("mouseout",(function(e){t&&(t.remove(),t=null)}))}},746:(e,t,n)=>{"use strict";n(888);let l=document.querySelectorAll(".js-comment__date");for(let e of l)o(e);function o(e){let t=function(e){let t=new Date;return Math.floor((t-e)/864e5)}(new Date(Date.parse(e.textContent)));if(t>=365){let n=Math.floor(t/365);e.textContent=n+" "+r(n,"год","года","лет")+" назад"}else if(t>=30){let n=Math.floor(t/30);e.textContent=n+" "+r(n,"месяц","месяца","месяцев")+" назад"}else if(t>=7){let n=Math.floor(t/7);e.textContent=n+" "+r(n,"неделю","недели","недель")+" назад"}else e.textContent=t>1?t+" "+r(t,"день","дня","дней")+" назад":1==t?"вчера":"сегодня"}function r(e,t,n,l){let o=l;return[1,21,31,41,51,61,71,81,91].includes(i(e))&&(o=t),[2,3,4].includes(+e.toString().slice(-1))&&![12,13,14].includes(i(e))&&(o=n),o}function i(e){return+e.toString().slice(-2)}},414:(e,t,n)=>{"use strict";var l=n(638);n(490),n(248),n(77),l(".datepicker-here").datepicker({clearButton:!0,navTitles:{days:"MM yyyy"},offset:6,minDate:new Date,language:{monthsShort:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]},range:!0,multipleDatesSeparator:" - "});let o=document.querySelectorAll(".datepicker");for(let e of o)r(e),i(e);function r(e){let t=e.querySelectorAll(".datepicker--button");for(let e of t)e.classList.add("button")}function i(e){let t=document.createElement("button");var n;t.textContent="Применить",t.className="datepicker--button button",e.querySelector(".datepicker--buttons").append(t),(n=t).addEventListener("click",(function(){n.closest(".datepicker").classList.remove("active"),l(".datepicker-here").blur()}))}let u=document.querySelectorAll(".datepicker-here");for(let e of u){let t=l(e).datepicker().data("datepicker");e.defaultValue&&(e.defaultValue.includes(" - ")?t.selectDate([new Date(Date.parse(e.defaultValue.slice(0,10))),new Date(Date.parse(e.defaultValue.slice(13)))]):t.selectDate(new Date(Date.parse(e.defaultValue)))),e.addEventListener("keydown",(function(e){e.preventDefault()}))}let c=document.querySelectorAll(".date-start");for(let e of c)l(e).datepicker({onSelect:function(t,n,o){l(e).val(t.split(" - ")[0]);let r=e.parentElement.parentElement.nextElementSibling.querySelector(".date-end");l(r).val(t.split(" - ")[1])}});let s=document.querySelectorAll(".date-end");for(let e of s)l(e).datepicker({onSelect:function(t,n,o){let r=e.parentElement.parentElement.previousElementSibling.querySelector(".date-start");l(r).val(t.split(" - ")[0]),l(e).val(t.split(" - ")[1])},position:"bottom right"})},109:()=>{"use strict";let e=document.querySelectorAll(".js-dropdown");for(let r of e){o(r);let e=r.querySelector(".js-dropdown__output .js-input .js-input__input");e.addEventListener("click",(function(){t(r,e)}));let i=r.querySelectorAll(".js-dropdown__item");for(let e of i){let t=e.querySelector(".js-dropdown__item-input"),i=e.querySelector(".js-dropdown__button-minus"),s=e.querySelector(".js-dropdown__button-plus");i.addEventListener("click",(function(){n(e,t)&&(t.value--,a(e,t)&&(i.disabled=!0),s.disabled=!1),o(r),p.style.display="inline-block",c(r)&&(u.style.display="inline-block")})),s.addEventListener("click",(function(){l(e,t)&&(t.value++,d(e,t)&&(s.disabled=!0),i.disabled=!1),o(r),p.style.display="inline-block",u.style.display="inline-block"})),a(e,t)&&(i.disabled=!0),d(e,t)&&(s.disabled=!0)}let u=r.querySelector(".js-dropdown__button-reset");c(r)&&(u.style.display="inline-block"),u.addEventListener("click",(function(){s(r),u.style.display="none"}));let p=r.querySelector(".js-dropdown__button-apply");p.addEventListener("click",(function(){t(r,e),p.style.display="none"}))}function t(e,t){e.classList.toggle("dropdown_menu_open"),t.classList.toggle("input__input_dropdown_open"),t.classList.toggle("input__input_focused")}function n(e,t){return e.dataset.minCount?t.value>e.dataset.minCount:t.value>0}function l(e,t){return!e.dataset.maxCount||t.value<e.dataset.maxCount}function o(e){let t=e.querySelector(".js-dropdown__output .js-input .js-input__input"),n=e.querySelectorAll(".js-dropdown__item-input");if("guests"==e.dataset.type)if(0==r(e))t.value="Сколько гостей";else{let e=+n[0].value+ +n[1].value,l=u(e,"гость","гостя","гостей"),o=+n[2].value,r=u(o,"младенец","младенца","младенцев");t.value=0==o?e+" "+l:e+" "+l+", "+o+" "+r}if("facilities"==e.dataset.type)if(0==r(e))t.value="Выберите удобства";else{let e="",l=+n[0].value;l>0&&(e+=l+" "+u(l,"спальня","спальни","спален"));let o=+n[1].value;if(o>0){let t=u(o,"кровать","кровати","кроватей");e.length>0&&(e+=", "),e+=o+" "+t}let r=+n[2].value;if(r>0){let t=u(r,"ванная","ванные","ванных");e.length>0&&(e+=", "),e+=r+" "+t}t.value=e}}function r(e){let t=0,n=e.querySelectorAll(".js-dropdown__item-input");for(let e of n)t+=+e.value;return t}function i(e){return+e.toString().slice(-2)}function u(e,t,n,l){let o=l;return[1,21,31,41,51,61,71,81,91].includes(i(e))&&(o=t),[2,3,4].includes(+e.toString().slice(-1))&&![12,13,14].includes(i(e))&&(o=n),o}function c(e){let t=e.querySelectorAll(".js-dropdown__item-input");for(let e of t)if(0!=e.value&&e.value!=e.closest(".js-dropdown__item").dataset.minCount)return!0}function s(e){let t=e.querySelectorAll(".js-dropdown__item");for(let e of t){let t=e.querySelector(".js-dropdown__item-input");t.value=t.closest(".js-dropdown__item").dataset.minCount||0,e.querySelector(".js-dropdown__button-minus").disabled=!0}o(e)}function a(e,t){return t.value==e.dataset.minCount||0==t.value}function d(e,t){return t.value==e.dataset.maxCount}},718:(e,t,n)=>{"use strict";n(565)},653:()=>{"use strict";let e=document.querySelectorAll(".header");for(let t of e){let e=t.querySelector(".js-header__burger"),n=t.querySelector(".js-header__menu");e.addEventListener("click",(function(){e.classList.toggle("header__burger_menu_open"),n.classList.toggle("header__menu_open")}))}},565:(e,t,n)=>{"use strict";n(490)},490:(e,t,n)=>{"use strict";var l=n(824);document.querySelector(".js-input_birthday")&&new l.Z(".js-input_birthday",{date:!0,delimiter:".",datePattern:["d","m","Y"]})},888:()=>{"use strict";let e=document.querySelectorAll(".js-like");for(let t of e)t.addEventListener("click",(function(){t.classList.toggle("like_checked");let e=+t.textContent;t.classList.contains("like_checked")?t.textContent=++e:t.textContent=--e}))},276:(e,t,n)=>{"use strict";function l(e){return+e.toString().slice(-2)}n(718),n(653),n(68),n(746);let o=document.querySelectorAll(".diagram");for(let e of o)r(e);function r(e){let t=e.querySelector(".js-diagram__votes-word"),n=e.querySelector(".js-diagram__votes-number").textContent;t.textContent=function(e,t,n,o){let r="голосов";return[1,21,31,41,51,61,71,81,91].includes(l(e))&&(r="голос"),[2,3,4].includes(+e.toString().slice(-1))&&![12,13,14].includes(l(e))&&(r="голоса"),r}(n)}function i(e){return+e.toString().slice(-2)}let u=document.querySelector(".js-room-details__comments-number"),c=document.querySelectorAll(".js-room-details__comment");u.textContent=c.length+" "+function(e,t,n,l){let o="отзывов";return[1,21,31,41,51,61,71,81,91].includes(i(e))&&(o="отзыв"),[2,3,4].includes(+e.toString().slice(-1))&&![12,13,14].includes(i(e))&&(o="отзыва"),o}(c.length)}},0,[[276,666,216]]]);